const data = [
    {
        id: 0,
        titleEng: 'Project management',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-1.svg',
        keyword: 'frontend'
    },
    {
        id: 1,
        titleEng: 'Project manager',
        titleGeo: 'პროექტის მენეჯერი',
        Description: ' PM, ერთ-ერთი მთავარი მონაწილე პროექტში. მისი როლი არის',
        hashTags: ['გრაფიკულიდიზაინი', 'wordpress'],
        iconPath: 'media/svg/term-cards/term-icon-2.svg',
        keyword: 'wordpress'
    },
    {
        id: 2,
        titleEng: 'ICT Project',
        titleGeo: 'ICT პროექტი',
        Description: 'ICT იშიფრება, როგორც ინფორმაციული და საკომუნიკაციო როგორც ინფორმაციული და საკომუნიკაციო',
        hashTags: ['გრაფიკულიდიზაინი', 'python'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'python'
    },
    {
        id: 3,
        titleEng: 'Project management 3',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-1.svg',
        keyword: 'frontend'
    },
    {
        id: 4,
        titleEng: 'Project management 4',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'wordpress'],
        iconPath: 'media/svg/term-cards/term-icon-2.svg',
        keyword: 'wordpress'
    },
    {
        id: 5,
        titleEng: 'Project management 5',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'python'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'python'
    },
    {
        id: 6,
        titleEng: 'Project management 6',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-1.svg',
        keyword: 'frontend'
    },
    {
        id: 7,
        titleEng: 'Project management 7',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'wordpress'],
        iconPath: 'media/svg/term-cards/term-icon-2.svg',
        keyword: 'wordpress'
    },
    {
        id: 8,
        titleEng: 'Project management 8',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'python'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'python'
    },
    {
        id: 9,
        titleEng: 'Project management 9',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'python'],
        iconPath: 'media/svg/term-cards/term-icon-1.svg',
        keyword: 'python'
    },
    {
        id: 10,
        titleEng: 'Project management 10',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'wordpress'],
        iconPath: 'media/svg/term-cards/term-icon-2.svg',
        keyword: 'wordpress'
    },
    {
        id: 11,
        titleEng: 'Project management 11',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'frontend'
    },
    {
        id: 12,
        titleEng: 'Project management 12',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'python'],
        iconPath: 'media/svg/term-cards/term-icon-1.svg',
        keyword: 'python'
    },
    {
        id: 13,
        titleEng: 'Project management 13',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'wordpress'],
        iconPath: 'media/svg/term-cards/term-icon-2.svg',
        keyword: 'wordpress'
    },
    {
        id: 14,
        titleEng: 'Project management 14',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'frontend'
    },
    {
        id: 15,
        titleEng: 'Project management 15',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'python'],
        iconPath: 'media/svg/term-cards/term-icon-1.svg',
        keyword: 'python'
    },
    {
        id: 16,
        titleEng: 'Project management 16',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'wordpress'],
        iconPath: 'media/svg/term-cards/term-icon-2.svg',
        keyword: 'wordpress'
    },
    {
        id: 17,
        titleEng: 'Project management 17',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'frontend'
    },
    {
        id: 18,
        titleEng: 'Project management 18',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'python'],
        iconPath: 'media/svg/term-cards/term-icon-1.svg',
        keyword: 'python'
    },
    {
        id: 19,
        titleEng: 'Project management 19',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'wordpress'],
        iconPath: 'media/svg/term-cards/term-icon-2.svg',
        keyword: 'wordpress'
    },
    {
        id: 20,
        titleEng: 'Project management 20',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'frontend'
    },
    {
        id: 21,
        titleEng: 'Project management 21',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'python'],
        iconPath: 'media/svg/term-cards/term-icon-1.svg',
        keyword: 'python'
    },
    {
        id: 22,
        titleEng: 'Project management 22',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'wordpress'],
        iconPath: 'media/svg/term-cards/term-icon-2.svg',
        keyword: 'wordpress'
    },
    {
        id: 23,
        titleEng: 'Project management 23',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'frontend'
    },
    {
        id: 24,
        titleEng: 'Project management 24',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'python'],
        iconPath: 'media/svg/term-cards/term-icon-1.svg',
        keyword: 'python'
    },
    {
        id: 25,
        titleEng: 'Project management 25',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'wordpress'],
        iconPath: 'media/svg/term-cards/term-icon-2.svg',
        keyword: 'wordpress'
    },
    {
        id: 26,
        titleEng: 'Project management 26',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'frontend'
    },
    {
        id: 27,
        titleEng: 'Project management 27',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'python'],
        iconPath: 'media/svg/term-cards/term-icon-1.svg',
        keyword: 'python'
    },
    {
        id: 28,
        titleEng: 'Project management 28',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'wordpress'],
        iconPath: 'media/svg/term-cards/term-icon-2.svg',
        keyword: 'wordpress'
    },
    {
        id: 29,
        titleEng: 'Project management 29',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'frontend'
    },
    {
        id: 30,
        titleEng: 'Project management 30',
        titleGeo: 'პროექტის მენეჯმენტი',
        Description: 'ადამიანური, მატერიალური და დროითი რესურსების დაგეგმვა',
        hashTags: ['გრაფიკულიდიზაინი', 'frontend'],
        iconPath: 'media/svg/term-cards/term-icon-3.svg',
        keyword: 'frontend'
    },
]
const alphabetArrGeo = ['ა', 'ბ', 'გ', 'დ', 'ე', 'ვ', 'ზ', 'თ', 'ი', 'კ', 'ლ', 'მ', 'ნ', 'ო', 'პ', 'ჟ', 'რ', 'ს', 'ტ', 'უ', 'ფ', 'ქ', 'ღ', 'ყ', 'შ', 'ჩ', 'ც', 'ძ', 'წ', 'ჭ', 'ხ', 'ჯ', 'ჰ']
const alphabetArrEng = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']

const cardsWrapper = document.querySelector('.term-cards-wrapper')
if (document.location.pathname == '/unilab-dictionary/index.html') {
    const dataToRender = data.filter(item => item.id < 3)
    renderData(dataToRender)
}
if (document.location.pathname == '/unilab-dictionary/dictionary.html') {
    const alphabetWrapper = document.querySelector('.alphabet-wrapper')
    const alphabetSwitcher = document.querySelector('.alphabet-switcher')
    const searchFilter = document.querySelector('#filter')
    const resultCounter = document.querySelector('.search-result-counter')
    const messageWrapper = document.querySelector('.counter-wrapper')
    const notFoundMessage = document.querySelector('.not-found-message-wrapper')
    const paginationWrapper = document.querySelector('.pagination')
    const termsPerPage = 9
    const roundedTermsNum = Math.ceil(data.length / termsPerPage)
    let paginationResult
    // initiate first page on window load
    window.onload = () => {
        document.querySelector('.page-number').click()
    }
    // initiate first page on window load

    // generating 9 cards per page
    paginationRender(data)
    function paginationRender (arr) {
        
        const leftArrow = document.createElement('span')
        leftArrow.setAttribute('class', 'pagination-left-arrow')
        leftArrow.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="12.51" height="8.893" viewBox="0 0 12.51 8.893">
            <g id="noun_Arrow_2884045" transform="translate(12.51) rotate(90)">
                <path id="Path_3" data-name="Path 3" d="M8.307,12.51.207,6.66a.5.5,0,0,1,0-.81L8.307,0l.586.811L1.354,6.255,8.893,11.7Z" transform="translate(0 0)" fill="#8a8fa3" opacity="0.63"/>
            </g>
        </svg>
        `
        paginationWrapper.append(leftArrow)
        for (let i = 1; i <= roundedTermsNum; i++) {
            const pageNumber = document.createElement('span')
            pageNumber.setAttribute('class', 'page-number')
            pageNumber.innerText = i
            paginationWrapper.append(pageNumber)
            pageNumber.addEventListener('click', function () {
                document.querySelectorAll('.page-number').forEach(el => el.classList.remove('active-page'))
                this.classList.add('active-page')
                const pageNum = +this.innerText
                const startPoint = (pageNum - 1) * termsPerPage
                const endPoint = startPoint + termsPerPage
                paginationResult = arr.slice(startPoint, endPoint)
                cardsWrapper.innerHTML = ''
                renderData(paginationResult)
            })
        }
        const rightArrow = document.createElement('span')
        rightArrow.setAttribute('class', 'pagination-right-arrow')
        rightArrow.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="12.51" height="8.893" viewBox="0 0 12.51 8.893">
            <g id="noun_Arrow_2884045" transform="translate(0 8.893) rotate(-90)">
                <path id="Path_3" data-name="Path 3" d="M8.307,0,.207,5.85a.5.5,0,0,0,0,.81l8.1,5.85.586-.811L1.354,6.255,8.893.81Z" fill="#8a8fa3" opacity="0.63"/>
            </g>
        </svg>
        `
        paginationWrapper.append(rightArrow)
        leftArrow.addEventListener('click', () => {
            console.log('left clicked')
        })
        rightArrow.addEventListener('click', () => {
            console.log('right clicked')
        })
    }
    // generating 9 cards per page


    alphabetGenerator(alphabetArrGeo)
    lettersOnClick()
    const switchFace = document.querySelector('.switch-face')
    const alphabetBg = document.querySelector('.alphabet-bg')
    const switchTextEng = 'ENG'
    const switchTextGeo = 'ქარ'
    switchFace.innerText = switchTextEng

    switchFace.addEventListener('click', () => {
        if (switchFace.innerText == switchTextEng) {
            switchFace.innerText = switchTextGeo
            alphabetWrapper.innerText = ''
            alphabetGenerator(alphabetArrEng)
            alphabetSwitcher.style.transform = 'translateX(34px)'
            lettersOnClick()
        }
        else {
            switchFace.innerText = switchTextEng
            alphabetWrapper.innerText = ''
            alphabetGenerator(alphabetArrGeo)
            alphabetSwitcher.style.transform = 'translateX(0px)'
            lettersOnClick()
        }

    })


    searchFilter.addEventListener('change', () => {
        const searchFilterData = data.filter(item => item.keyword == searchFilter.value)
        searchCounter(searchFilterData)
        if (searchFilter.value !== 'default') {
            cardsWrapper.innerHTML = ''
            renderData(searchFilterData)
        }
    })

    const search = document.querySelector('#dictionary-search')
    search.addEventListener('input', (e) => {
        cardsWrapper.innerHTML = ''
        paginationWrapper.style.display = 'none';
        const filteredData = data.filter(item => item.titleEng.includes(e.target.value) || item.titleGeo.includes(e.target.value))
        if(filteredData.length < 10 && filteredData.length !== 0) {
            searchCounter(filteredData)
            renderData(filteredData)
            paginationWrapper.style.display = 'none'
        }else if (filteredData.length == 0){
            notFoundMessage.style.display = 'flex'
            paginationWrapper.style.display = 'none'
            searchCounter(filteredData)
        }
        if (e.target.value == '') {
            renderData(paginationResult)
            notFoundMessage.style.display = 'none'
            paginationWrapper.style.display = 'block'
            messageWrapper.style.display = 'none'
            // searchCounter(data)

        }else if (e.target.value !== '' && filteredData.length >= 10){
            console.log(filteredData.length)
            searchCounter(filteredData)
            renderData(filteredData)
            paginationWrapper.style.display = 'none'
        }
    })



    function searchCounter(arr) {
        if (arr !== null) {
            messageWrapper.style.display = 'block'
            resultCounter.innerText = arr.length
        }
    }


    function alphabetGenerator(alphabetArray) {
        if (alphabetArray[0] == alphabetArrGeo[0]) {
            alphabetArray.forEach((letter) => {
                const letterSpan = document.createElement('span')
                letterSpan.setAttribute('class', 'letter-box')
                letterSpan.innerText = letter
                alphabetWrapper.append(letterSpan)
                letterSpan.addEventListener('click', (e) => {
                    console.log(e.target);
                })
            })
        } else {
            alphabetArray.forEach((letter) => {
                const letterSpan = document.createElement('span')
                letterSpan.setAttribute('class', 'letter-box')
                letterSpan.innerText = letter.toUpperCase()
                alphabetWrapper.append(letterSpan)
                letterSpan.addEventListener('click', (e) => {
                    console.log(e.target);
                })
            })
        }
    }

    function lettersOnClick() {
        const letterBoxes = document.querySelectorAll('.letter-box')
        letterBoxes.forEach(letterBox => {
            letterBox.addEventListener('click', function () {
                letterBoxes.forEach(letter => letter.classList.remove('active-letter'))
                letterBox.classList.add('active-letter')
            })
        })
    }

}









function renderData(array) {
    array.forEach((element) => {
        const card = document.createElement('div')
        card.setAttribute('class', 'term-card')
        cardsWrapper.append(card)
        card.innerHTML = `
                  <div class="card-header">
                      <span class="term-icon">
                          <img src="${element.iconPath}" alt="third icon">
                      </span>
                      <h3 class="term-header-title"><span class="bold">${element.titleEng} -</span><span>${element.titleGeo}</span></h3>
                  </div>
                  <div class="card-body">
                      <p class="term-description">${element.Description}</p>
                  </div>
                  <div class="card-footer">
                      <div class="hashtag-keywords">
                          <span>#${element.hashTags[0]}</span>
                          <span>#${element.hashTags[1]}</span>
                      </div>
                      <div class="button-wrapper">
                          <a href="#" class="see-details">ნახე სრულად</a>
                      </div>
                  </div>
    `
    })
}